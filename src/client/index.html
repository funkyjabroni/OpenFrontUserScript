<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OpenFront (ALPHA)</title>
    <link rel="manifest" href="../../resources/manifest.json" />

    <!-- Critical CSS to prevent FOUC -->
    <style>
      .preload * {
        -webkit-transition: none !important;
        -moz-transition: none !important;
        -ms-transition: none !important;
        -o-transition: none !important;
        transition: none !important;
      }

      html {
        visibility: visible;
        opacity: 1;
      }

      html.preload {
        visibility: hidden;
        opacity: 0;
      }

      .left-gutter-ad {
        position: fixed;
        left: 0;
        top: 200px;
        /* Changed from top: 50% */
        transform: none;
        /* Removed translateY(-50%) since we don't need to center anymore */
        z-index: 40;
        width: 300px;
        height: 600px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        pointer-events: auto;
      }

      .left-gutter-ad google-ad {
        width: 100%;
        height: 100%;
        display: block;
      }

      .right-gutter-ad {
        position: fixed;
        right: 0;
        top: 200px;
        /* Changed from top: 50% */
        transform: none;
        /* Removed translateY(-50%) since we don't need to center anymore */
        z-index: 40;
        width: 300px;
        height: 600px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        pointer-events: auto;
      }

      .right-gutter-ad google-ad {
        width: 100%;
        height: 100%;
        display: block;
      }

      /* Media query to hide the gutter ad on smaller screens */
      @media (max-width: 1280px) {
        .left-gutter-ad {
          display: none;
        }

        .right-gutter-ad {
          display: none;
        }
      }
    </style>

    <!-- Immediate execution to prevent FOUC -->
    <script>
      document.documentElement.className = "preload";
    </script>

    <!-- Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=AW-16702609763"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push(arguments);
      }

      gtag("js", new Date());
      gtag("config", "AW-16702609763");
    </script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-WQGQQ8RDN4"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-WQGQQ8RDN4");
    </script>
  </head>
  <!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------- -->
  <body
    class="min-h-screen bg-slate-900 flex flex-col items-center justify-between relative overflow-hidden"
  >
    <!-- Background -->
    <div class="absolute inset-0 z-[-1]">
      <div
        class="absolute inset-0 bg-cover bg-center"
        style="
          background-image: url(&quot;https://images.pexels.com/photos/269724/pexels-photo-269724.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2&quot;);
          filter: blur(4px) brightness(0.4);
          image-rendering: pixelated;
        "
      ></div>
      <div
        class="absolute inset-0 bg-gradient-to-b from-slate-900/80 via-slate-900/50 to-slate-900/80"
      ></div>
      <div class="absolute inset-0 bg-grid-tactical"></div>
    </div>

    <!-- Background grid -->
    <div class="scanlines"></div>

    <div class="relative z-10 w-full max-w-7xl mx-auto px-4 pt-8">
      <!-- Header -->
      <main-navbar></main-navbar>

      <!-- Game Interface -->
      <main class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
        <!--  Main Game Area and Buttons -->
        <div class="lg:col-span-8 space-y-8">
          <!--  Game card component -->
          <public-lobby></public-lobby>

          <!-- Action Buttons -->
          <div class="grid grid-cols-2 gap-4">
            <o-button
              id="join-private-lobby-button"
              title="Join Lobby"
              translationKey="main.join_lobby"
              icon="icons/users.svg"
            ></o-button>

            <o-button
              id="host-lobby-button"
              title="Create Lobby"
              translationKey="main.create_lobby"
              icon="icons/swords.svg"
            ></o-button>

            <o-button
              id="single-player"
              title="Single Player"
              translationKey="main.single_player"
              icon="icons/user.svg"
              secondary
            ></o-button>

            <o-button
              id="help-button"
              title="Instructions"
              translationKey="main.instructions"
              icon="icons/book-open.svg"
              secondary
            ></o-button>

            <!-- Language Selection -->
            <div class="col-span-2">
              <lang-selector></lang-selector>
            </div>
          </div>
        </div>
        <!--  Side Panel -->
        <div class="lg:col-span-4 space-y-4">
          <!-- Quick Join -->
          <div class="background-panel p-4">
            <h3 class="font-title text-xl text-white mb-4">QUICK JOIN</h3>
            <div class="space-y-4">
              <div class="flex gap-2">
                <div class="flex-1">
                  <div class="relative">
                    <username-input></username-input>
                  </div>
                </div>
                <div class="flex gap-1">
                  <!-- Flag Selection -->
                  <div class="relative">
                    <flag-trigger-button></flag-trigger-button>
                  </div>
                  <!-- Pattern Selection -->
                  <div class="relative">
                    <button
                      class="h-full background-panel bg-slate-700 px-3 p-0 py-2 flex items-center justify-center min-w-[48px] hover:bg-slate-600"
                    >
                      <o-icon
                        src="icons/squares-exclude.svg"
                        size="medium"
                        color="var(--text-color-white)"
                      ></o-icon>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Latest News -->
          <div class="background-panel p-4 relative">
            <div class="flex items-center justify-between mb-4">
              <h3 class="font-title text-xl text-white">LATEST NEWS</h3>
              <svg
                class="w-[18px] h-[18px] text-slate-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 7.388 6 10v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
                ></path>
              </svg>
            </div>
            <div class="space-y-4">
              <div
                class="background-panel p-3 hover:bg-slate-800/50 transition-all cursor-pointer group"
                id="news-button"
              >
                <div class="flex items-center justify-between mb-2">
                  <span
                    class="text-xs font-title px-2 py-0.5 bg-green text-white"
                    >PATCH</span
                  >
                  <span class="text-xs text-slate-400">5h ago</span>
                </div>
                <h4
                  class="font-title text-white text-sm mb-1 group-hover:text-blue-400 transition-colors"
                >
                  OpenFront v23.0 Release Notes
                </h4>
                <p class="text-xs text-slate-400">
                  Major gameplay overhaul with new features, UI improvements,
                  and bug fixes.

                  <span
                    class="text-blue-400 hover:text-blue-300 transition-colors ml-1 read-more"
                    data-type="EVENT"
                    data-title="Weekend tournament starting soon"
                    data-date="5h ago"
                    data-description="Major gameplay overhaul with new features, UI improvements, and bug fixes.
"
                    >Read more...</span
                  >
                </p>
              </div>
              <!--
              <news-button
                .article="${yourArticleData}"
                timeAgo="5h ago"
                @news-article-click="${this.handleNewsClick}"
              ></news-button>
              -->
              <div
                class="background-panel p-3 hover:bg-slate-800/50 transition-all cursor-pointer group"
              >
                <div class="flex items-center justify-between mb-2">
                  <span
                    class="text-xs font-title px-2 py-0.5 bg-orange-600 text-white"
                    >PATCH</span
                  >
                  <span class="text-xs text-slate-400">1d ago</span>
                </div>
                <h4
                  class="font-title text-white text-sm mb-1 group-hover:text-blue-400 transition-colors"
                >
                  Balance Update v22.6.1
                </h4>
                <p class="text-xs text-slate-400">
                  • Improved troop movement AI<br />• Fixed alliance request
                  bug<br />• Adjusted resource generation rates
                  <span
                    class="text-blue-400 hover:text-blue-300 transition-colors ml-1 read-more"
                    data-type="PATCH"
                    data-title="Balance Update v22.6.1"
                    data-date="1d ago"
                    data-description="Improved troop movement AI, Fixed alliance request bug, Adjusted resource generation rates"
                    >Read more...</span
                  >
                </p>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- User Setting -->
    <div class="fixed bottom-6 right-6 z-50">
      <button
        id="settings-button"
        title="Settings"
        class="pixel-button flex items-center justify-center p-3"
      >
        <o-icon
          src="icons/settings.svg"
          size="large"
          color="var(--text-color-light)"
        ></o-icon>
      </button>
    </div>

    <!-- Game components -->
    <div id="customMenu" class="mt-4 sm:mt-6 lg:mt-8">
      <ul></ul>
    </div>
    <div id="app"></div>
    <div id="radialMenu" class="radial-menu"></div>
    <div
      class="flex flex-column gap-2 fixed right-[10px] top-[10px] z-50 flex flex-col w-32 sm:w-32 lg:w-48"
    >
      <options-menu></options-menu>
      <player-info-overlay></player-info-overlay>
    </div>
    <div
      class="fixed bottom-[30px] sm:bottom-auto sm:top-[20px] z-50 mx-auto max-w-max inset-x-0 items-center"
    >
      <heads-up-message></heads-up-message>
    </div>
    <div class="fixed left-[10px] top-[10px] z-50 w-36 lg:w-48 items-center">
      <player-team-label></player-team-label>
    </div>

    <div
      class="bottom-0 w-full flex-col-reverse sm:flex-row z-50"
      style="position: fixed; pointer-events: none"
    >
      <div
        class="w-full sm:w-2/3 sm:fixed sm:right-0 sm:bottom-0 sm:flex justify-end"
        style="pointer-events: none"
      >
        <chat-display></chat-display>
        <events-display></events-display>
      </div>
      <div class="w-full sm:w-1/3 md:max-w-72" style="pointer-events: auto">
        <control-panel></control-panel>
      </div>
    </div>

    <!-- Game modals and overlays -->
    <single-player-modal></single-player-modal>
    <host-lobby-modal></host-lobby-modal>
    <join-private-lobby-modal></join-private-lobby-modal>
    <emoji-table></emoji-table>
    <leader-board></leader-board>
    <build-menu></build-menu>
    <win-modal></win-modal>
    <game-starting-modal></game-starting-modal>
    <top-bar></top-bar>
    <team-stats></team-stats>
    <player-panel></player-panel>
    <help-modal></help-modal>
    <!--<flag-input></flag-input>-->
    <!-- lagging flag-modal-->
    <flag-modal></flag-modal>
    <login-modal></login-modal>
    <news-modal></news-modal>
    <chat-modal></chat-modal>

    <user-setting></user-setting>
    <multi-tab-modal></multi-tab-modal>
    <unit-info-modal></unit-info-modal>
    <left-in-game-ad></left-in-game-ad>

    <!-- Footer section -->
    <main-footer></main-footer>
    <!-- Scripts -->
    <script>
      // Remove preload class after everything is loaded
      window.addEventListener("load", function () {
        requestAnimationFrame(() => {
          document.documentElement.classList.remove("preload");
        });
      });
    </script>

    <!-- Analytics -->
    <script
      defer
      src="https://static.cloudflareinsights.com/beacon.min.js"
      data-cf-beacon='{"token": "03d93e6fefb349c28ee69b408fa25a13"}'
    ></script>
  </body>
</html>
